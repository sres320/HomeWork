---
title: "Facebookç²‰çµ²åœ˜åˆ†æï¼šæŸ¯ï¼°"
output: github_document
---


##è®€å–æŸ¯æ–‡å“²ç²‰çµ²åœ˜è³‡æ–™
å…ˆå®‰è£Rfacebookçš„packagesï¼Œæ”¾å…¥libraryã€‚

æ¥è‘—æ”¾å…¥è‡ªå·±çš„tokenï¼Œé–‹å§‹å°‡æŸ¯På¾2016-01-01åˆ°ä»Šå¤©2016-04-10çš„æ‰€æœ‰æ–‡ç« éƒ½åŠ é€²totalPageä¸­è£¡é¢ã€‚

forè¿´åœˆä¸­æ˜¯å…ˆæš«å­˜æ¯äº”å¤©çš„æ–‡ç« åœ¨tempPageä¸­ï¼Œå†å€‹åˆ¥æ”¾åˆ°totalpageä¸­çµ±ä¸€å½™æ•´ï¼Œç®—å‡ºç¸½æ–‡ç« æ•¸~
```
install.packages("Rfacebook")
library(Rfacebook)
token = "CAACEdEose0cBAJNmw7cEpCtNs3HZCQovhQmkX0WrA3sKKYRdFieS6epMa2sAwCSZBp2FAoFuAXijyaTwfx15UPYSg9M0sfMMHcfDaLx75kr7EDct1PyM9AMqVZCQZAo6fFiN0mpinnYPNMFYZCiULITjV3x4ggjr1eJCfQsdwDoujWHbq6rKPEPPus8PRQcWZBZCXvetn7UUgUiHaBwAoaO"
FBData = GET (paste0 ("https://graph.facebook.com/v2.5/DoctorKoWJ?fields=posts%7Blikes%2Ccomments%2Cshares%7D&access_token=",token))
names(FBData)
```
```
totalPage = NULL
lastDate = Sys.Date()
DateVectorStr = as.character(seq(as.Date("2016-01-01"),lastDate,by="5 days"))
for(i in 1:(length(DateVectorStr)-1)){
  tempPage = getPage("DoctorKoWJ",token,since = DateVectorStr[i],until = DateVectorStr[i+1])
  totalPage = rbind(totalPage,tempPage)
}
nrow(totalPage)
```
è¨è«–ï¼š

æˆªè‡³2016/01/01è‡³2016/04/10æŸ¯Pç²‰çµ²åœ˜ä¸€å…±æœ‰57ç¯‡æ–‡ç« 



##æ¯æ—¥ç™¼æ–‡æ•¸åˆ†æ
åˆ†ææŸ¯Pç²‰çµ²åœ˜æ¯å¤©çš„ç™¼æ–‡æ•¸ï¼Œç”±æ–¼FBæ—¥æœŸæ ¼å¼æ¯”è¼ƒSPECIALï¼Œæ‰€ä»¥è¦å…ˆå°‡å…¶è½‰æ›ç‚ºå°ç£æ™‚å€ï¼Œ

ç„¶å¾Œå¹«å¥¹å–ä¸€äº›æ¯”è¼ƒæ–¹ä¾¿çš„åå­—"PostDateTPE"(ç™¼æ–‡æ—¥æœŸ),"datetime"(ç™¼æ–‡æ™‚é–“),"weekdays"(ç™¼æ–‡æ˜ŸæœŸå¹¾)
```
totalPage$datetime = as.POSIXct(totalPage$created_time,format = "%Y-%m-%dT%H:%M:%S+0000",tz = "GMT") #2016-01-16T15:05:36+0000
totalPage$PostDateTPE = format(totalPage$datetime, "%Y-%m-%d",tz = "Asia/Taipei") #2016-01-16
totalPage$weekdays = weekdays(as.Date(totalPage$PostDateTPE))
Posts = totalPage$id
PostCount = aggregate(Posts~PostDateTPE,totalPage,length)
library(knitr)
kable(head(PostCount[order(PostCount$Posts,decreasing = T),],10))
```
|   |PostDateTPE | Posts|
|:--|:-----------|-----:|
|6  |2016-01-09  |     4|
|5  |2016-01-08  |     2|
|7  |2016-01-10  |     2|
|25 |2016-02-06  |     2|
|44 |2016-03-22  |     2|
|1  |2016-01-01  |     1|
|2  |2016-01-05  |     1|
|3  |2016-01-06  |     1|
|4  |2016-01-07  |     1|
|8  |2016-01-12  |     1|
è¨è«–ï¼š

ç”±ä¸Šçµ±è¨ˆè¡¨å¾—çŸ¥ï¼Œ0109.0108.0110ç‚ºå‰ä¸‰å¤šç™¼æ–‡çš„æ—¥æœŸï¼Œ

é€™ä¸‰å€‹æ—¥æœŸç›¸è¿‘æƒ³å¿…é‚£å¹¾å¤©æŸ¯Pä¸€å®šåšäº†ç”šéº¼æœ‰è¶£çš„äº‹æƒ…ï¼Œ

ä¸Šç²‰çµ²å°ˆæ¥­æŸ¥è©¢å¾Œå¾—çŸ¥ï¼Œæœä¸å…¶ç„¶å°±æ˜¯é‚£å¤©æŸ¯På‹‡çŒ›çš„é¨è…³è¸è»Šå—ä¸‹é˜¿é˜¿~

æŸ¯Pä¸€è·¯å¾0109æ¸…æ™¨äº”é»å—ä¸‹å’»å’»å’»åœ¨19å°æ™‚å¾Œï¼Œ

ä¹Ÿå°±æ˜¯1010çš„å‡Œæ™¨ç´„è«00:42ä¾†åˆ°é«˜é›„åˆç™¼äº†å…©ç¯‡æ–‡ï¼Œ

è€Œåœ¨å‡ºç™¼å‰çš„0108å…©ç¯‡æ–‡ç« ä¸€ç¯‡æ˜¯é—œæ–¼ã€Œä¸€æ—¥åŒ—é«˜ï¼Œé›™åŸæŒ‘æˆ°ã€ï¼Œ

å¦ä¸€ç¯‡å‰‡æ˜¯é—œæ–¼è‡ºåŒ—å¸‚æ”¿åºœ105å¹´åº¦ç¸½é ç®—ã€‚



##æ¯æ—¥likesæ•¸åˆ†æ
å› ç‚ºæŸ¯Pä¸€å¤©å¯èƒ½ç™¼è¡¨å¾ˆå¤šé•·ç¯‡å¤§è«–æ‰€ä»¥æˆ‘å€‘å…ˆç”¨likesç®—å‡ºè®šæ•¸å¹³å‡ç„¶å¾Œå­˜é€²å»

å†ç”¨Forè¿´åœˆå°‡å¹³å‡è®šæ•¸æ”¾é€²æ¯ä¸€åˆ—ä¸­ï¼Œä¸¦æŠŠæ‰€æœ‰è³‡æ–™å­˜é€²totalPageLikesã€‚

æœ€å¾Œä»¥å¹³å‡è®šæ•¸ç‚ºæ’åˆ—é †ï¼Œä¸¦ç”±å°åˆ°å¤§ï¼Œä½†å› ç‚ºåŒä¸€å¤©ç™¼çš„ä¸‰ç¯‡æ–‡ç« å¹³å‡ä¸‹ä¾†çš„è®šæ•¸ä¸€å®šä¸‰ç¯‡éƒ½ä¸€æ¨£ï¼Œ

æ‰€ä»¥å°‡ä¸‰ç¯‡æ–‡ç« æ’åœ¨ä¸€èµ·(Likes_Analysis)ä¸¦é¡¯ç¤º"ç™¼æ–‡æ—¥æœŸ","ç™¼æ–‡å…§å®¹","å¹³å‡è®šæ•¸","å„æœ‰è®šæ•¸"ã€‚
````
likes = aggregate(likes_count~PostDateTPE,totalPage,mean)
for(i in 1:nrow(PostCount)){
  for(j in PostCount$Posts){
    totalPageLikes = merge(totalPage,likes,by = "PostDateTPE")
  }
}
Likes_Analysis = totalPageLikes[order(totalPageLikes$likes_count.y, decreasing = T), c("PostDateTPE","message","likes_count.y","likes_count.x")]
kable(head(Likes_Analysis[order(Likes_Analysis$likes_count.y, decreasing = T), c("likes_count.y","PostDateTPE")],15))
```
|   | likes_count.y|PostDateTPE |
|:--|-------------:|:-----------|
|16 |        329087|2016-01-16  |
|39 |        228900|2016-02-28  |
|11 |        223666|2016-01-10  |
|12 |        223666|2016-01-10  |
|14 |        187448|2016-01-14  |
|38 |        180919|2016-02-27  |
|54 |        139062|2016-03-28  |
|15 |        128671|2016-01-15  |
|33 |        128019|2016-02-13  |
|7  |         95130|2016-01-09  |
|8  |         95130|2016-01-09  |
|9  |         95130|2016-01-09  |
|10 |         95130|2016-01-09  |
|30 |         70153|2016-02-06  |
|31 |         70153|2016-02-06  |
è¨è«–ï¼š

0116ç•¶å¤©é€™éº¼å¤šè®šæ•¸ï¼Œä¸ç”¨æƒ³ä¹Ÿèƒ½çŒœåˆ°é‚£å¤©ä¸€å®šæ˜¯è·Ÿç¸½çµ±å¤§é¸æœ‰é—œçš„æ–‡ç« ï¼Œ

0228å‰‡æ˜¯æŸ¯Pé¸æ“‡ä»¥é¨å–®è»Šæ‹š520å…¬é‡Œæ–¹å¼ä¾†ç´€å¿µ228ä¸¦ç™¼è¡¨äº†ä¸€ç¯‡æ„Ÿäººè‚ºè…‘çš„POæ–‡ï¼Œ

1010å…©ç¯‡æ–‡ä¸€ç¯‡æ˜¯ã€Œä¸€æ—¥é›™åŸã€å‰›æŠµé”é«˜é›„æ™‚çš„ç›´æ’­ï¼Œå¦ä¸€å‰‡æ˜¯å¤§åˆç…§ã€‚



##æ¯æ—¥commentsæ•¸åˆ†æ
å› ç‚ºæŸ¯Pä¸€å¤©å¯èƒ½ç™¼è¡¨å¾ˆå¤šé•·ç¯‡å¤§è«–æ‰€ä»¥æˆ‘å€‘å…ˆç”¨commentsç®—å‡ºç•™è¨€æ•¸å¹³å‡ç„¶å¾Œå­˜é€²å»

å†ç”¨Forè¿´åœˆå°‡å¹³å‡ç•™è¨€æ•¸æ”¾é€²æ¯ä¸€åˆ—ä¸­ï¼Œä¸¦æŠŠæ‰€æœ‰è³‡æ–™å­˜é€²totalPagecommentsã€‚

æœ€å¾Œä»¥å¹³å‡ç•™è¨€æ•¸ç‚ºæ’åˆ—é †ï¼Œä¸¦ç”±å°åˆ°å¤§ï¼Œä½†å› ç‚ºåŒä¸€å¤©ç™¼çš„ä¸‰ç¯‡æ–‡ç« å¹³å‡ä¸‹ä¾†çš„ç•™è¨€æ•¸ä¸€å®šä¸‰ç¯‡éƒ½ä¸€æ¨£ï¼Œ

æ‰€ä»¥å°‡ä¸‰ç¯‡æ–‡ç« æ’åœ¨ä¸€èµ·(Comments_Analysis)ä¸¦é¡¯ç¤º"ç™¼æ–‡æ—¥æœŸ","ç™¼æ–‡å…§å®¹","å¹³å‡ç•™è¨€æ•¸","å„æœ‰ç•™è¨€æ•¸"ã€‚
```
comments = aggregate(comments_count~PostDateTPE,totalPage,mean)
for(i in 1:nrow(PostCount)){
  for(j in PostCount$Posts){
    totalPagecomments = merge(totalPage, comments, by = "PostDateTPE")
  }
}
Comments_Analysis = totalPagecomments[order(totalPagecomments$comments_count.y, decreasing = T),c("PostDateTPE","message","comments_count.y","comments_count.x")]
kable(head(Comments_Analysis[order(Comments_Analysis$comments_count.y, decreasing = T),c("comments_count.y","PostDateTPE")],15))
```
|   | comments_count.y|PostDateTPE |
|:--|----------------:|:-----------|
|11 |          5981.50|2016-01-10  |
|12 |          5981.50|2016-01-10  |
|7  |          5153.25|2016-01-09  |
|8  |          5153.25|2016-01-09  |
|9  |          5153.25|2016-01-09  |
|10 |          5153.25|2016-01-09  |
|54 |          5103.00|2016-03-28  |
|39 |          3565.00|2016-02-28  |
|38 |          3268.00|2016-02-27  |
|14 |          2848.00|2016-01-14  |
|16 |          2439.00|2016-01-16  |
|33 |          2159.00|2016-02-13  |
|55 |          1550.00|2016-03-29  |
|2  |          1434.00|2016-01-05  |
|56 |          1415.00|2016-03-31  |
è¨è«–ï¼š

éå¸¸æ˜é¡¯çš„ï¼Œå‰å…­åç•™è¨€æ•¸éƒ½åœ¨0109-0110é˜¿é˜¿~

æ²’éŒ¯æ ¹æ“šä¸Šé¢å¹¾é¡Œç¨®ç¨®åˆ†æå¾Œï¼Œé€™å…©å¤©å°±æ˜¯æŸ¯Pä¸€æ—¥é›™åŸé‚£å…©å¤©å•Š~

å¤§å®¶è‡ªç„¶å°æŸ¯På¦‚æ­¤ç‹‚çš„è¡Œå¾‘é€²è¡Œè¨±å¤šçš„è¨è«–ï¼Œæ‰€ä»¥è¨è«–æ•¸å±…é«˜ä¸ä¸‹ã€‚



##æ¯æ—¥sharesæ•¸åˆ†æ
å› ç‚ºæŸ¯Pä¸€å¤©å¯èƒ½ç™¼è¡¨å¾ˆå¤šé•·ç¯‡å¤§è«–æ‰€ä»¥æˆ‘å€‘å…ˆç”¨sharesç®—å‡ºåˆ†äº«æ•¸å¹³å‡ç„¶å¾Œå­˜é€²å»

å†ç”¨Forè¿´åœˆå°‡å¹³å‡åˆ†äº«æ•¸æ”¾é€²æ¯ä¸€åˆ—ä¸­ï¼Œä¸¦æŠŠæ‰€æœ‰è³‡æ–™å­˜é€²totalPagesharesã€‚

æœ€å¾Œä»¥å¹³å‡åˆ†äº«æ•¸ç‚ºæ’åˆ—é †ï¼Œä¸¦ç”±å°åˆ°å¤§ï¼Œä½†å› ç‚ºåŒä¸€å¤©ç™¼çš„ä¸‰ç¯‡æ–‡ç« å¹³å‡ä¸‹ä¾†çš„åˆ†äº«æ•¸ä¸€å®šä¸‰ç¯‡éƒ½ä¸€æ¨£ï¼Œ

æ‰€ä»¥å°‡ä¸‰ç¯‡æ–‡ç« æ’åœ¨ä¸€èµ·(Shares_Analysis)ä¸¦é¡¯ç¤º"ç™¼æ–‡æ—¥æœŸ","ç™¼æ–‡å…§å®¹","å¹³å‡åˆ†äº«æ•¸","å„æœ‰åˆ†äº«æ•¸"ã€‚
```
shares = aggregate(shares_count~PostDateTPE,totalPage,mean)
for(i in 1:nrow(PostCount)){
  for(j in PostCount$Posts){
    totalPageshares = merge(totalPage,shares,by = "PostDateTPE")
  }
}
Shares_Analysis = totalPageshares[order(totalPageshares$shares_count.y, decreasing = T),c("PostDateTPE","message","shares_count.y","shares_count.x")]
kable(head(Shares_Analysis[order(Shares_Analysis$shares_count.y,decreasing = T),c("shares_count.y","PostDateTPE")],15))
```
|   | shares_count.y|PostDateTPE |
|:--|--------------:|:-----------|
|14 |        34777.0|2016-01-14  |
|11 |        16407.5|2016-01-10  |
|12 |        16407.5|2016-01-10  |
|39 |        11236.0|2016-02-28  |
|41 |         5334.0|2016-03-04  |
|54 |         4968.0|2016-03-28  |
|16 |         4897.0|2016-01-16  |
|2  |         2570.0|2016-01-05  |
|33 |         2456.0|2016-02-13  |
|7  |         2359.0|2016-01-09  |
|8  |         2359.0|2016-01-09  |
|9  |         2359.0|2016-01-09  |
|10 |         2359.0|2016-01-09  |
|15 |         2073.0|2016-01-15  |
|38 |         1416.0|2016-02-27  |
è¨è«–ï¼š

0114é€™å€‹ä¸æ˜¯å¾ˆé‡è¦çš„æ—¥å­ç‚ºç”šéº¼åˆ†äº«æ•¸é€™éº¼çš„é«˜å‘¢?!

å¯¦éš›å»æŸ¯Pçš„ç²‰çµ²å°ˆæ¥­ä¸€æŸ¥ä¹‹ä¸‹ç™¼ç¾é€™ç¯‡æ–‡ç« æ˜¯æŸ¯På°æ–¼å¤¢æƒ³å¾ˆæ„Ÿäººçš„ä¸€ç¿»è‚ºè…‘ä¹‹è¨€ï¼Œ

åˆ†äº«è€…å¤§å¤šæ˜¯æ¨å´‡é€™ç¨®æ•¢åšå¤¢çš„ç²¾ç¥ï¼Œä¸”ç„¡é—œä»»ä½•æ”¿æ²»ï¼Œ

å› æ­¤å—åˆ°è¨±å¤šç²‰çµ²çš„å»£å¤§åˆ†äº«ã€‚

0110å°±ä¸å¿…å¤šèªªäº†è·Ÿä¸Šé¡Œä¸€æ¨£æ˜¯é—œæ–¼æŸ¯På‹‡çŒ›é¨è…³è¸è»Šçš„äº‹è¹Ÿï¼›

0228å‰‡æ˜¯ç²‰çµ²è¡¨é”228å°å°ç£é€ æˆçš„å‚·ç—›ç­‰ç­‰çš„å¼•ç”¨æ–‡ç« ã€‚



<<<<<<< HEAD
##¥[¤ÀÃD
Commentsªº¤H¦b°Ï¶¡¤ºªº¯d¨¥ÀW²v(¯d¨¥¼Æ/µo¤å¼Æ,¥[¤ÀÃD)
=======
##åŠ åˆ†é¡Œ
##Commentsçš„äººåœ¨å€é–“å…§çš„ç•™è¨€é »ç‡(ç•™è¨€æ•¸/ç™¼æ–‡æ•¸,åŠ åˆ†é¡Œ)
>>>>>>> origin/master
```
id = totalPage$id#post_id
getPost(id,token,n.comments=xxx)


